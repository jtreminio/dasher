#!/usr/bin/env bash
set -e
set -o pipefail

DIR="$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )"

COMPOSE_PROJECT_NAME=""
CMD="${@}"

source "${DIR}/../../.env"

CONTAINER="${COMPOSE_PROJECT_NAME}_web_1"

if [[ -z "${CMD// }" ]]; then
    cat << HELP
Usage: node [COMMANDS]...
Execute COMMANDS in bash inside Node container instance.
Example: ./node yarn -v

Working directory is /var/www
HELP

    exit 1
fi

docker container exec -u node -it ${CONTAINER} sh -c "${CMD}"

exit 0
